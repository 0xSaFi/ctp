\section{Semi-empirical determination of transfer intergals}
\label{sec:moo}

\newcommand{\xyz}{\texttt{geometry.xyz}\xspace}
\newcommand{\orb}{\texttt{zindo.orb}\xspace}


The main purpose of the molecular orbital overal library (MOO) is fast evaluation of electronic coupling elements. Note that it is based on the semi-empirical ZINDO Hamiltonian and therefore has limited applicability. The general advice is to first compare the accuracy of this method to the DFT-based calculations. MOO constructs the Fock operator of a dimer from the  molecular orbitals of monomers by translating and rotating the orbitals. Hence, it requires the optimized geometry of the molecule (\xyz) and the projection coefficients of the molecular on atomic orbitals (\orb). 

\xyz file contains four columns, first being the atom type and the next three its coordinates. The \orb can be generated using \gaussian program and the input script \texttt{get\_orbitals.com} which shown in listing~\ref{list:zindo_orbitals}.

\lstinputlisting[
 label=list:zindo_orbitals, 
 caption={\small \gaussian input file \texttt{get\_orbitals.com} used for generating molecular orbitals. The first line contains  the name of the check file, the second the requested RAM. 
%
 \texttt{int=zindos} requests the method ZINDO, \texttt{punch=mo} states that the molecular orbitals ought to be written to  the \texttt{fort.7} file, \texttt{nosymm} forbids use of symmetry simplifcations and is necessary to ensure correct position of orbitals with respect to the provided coordinates. The two integer numbers correspond to the charge and multiplicity of the system: $0\, 1$ corresponds to a neutral system with a multiplicity of one. They are followed by the types and coordinates of all atoms in the molecule.
}]%
{./fig/moo/get_orbitals.com}

Provided with this input, \gaussian will generate \texttt{fort.7} file containing the molecular orbitals of a single molecule. This file can be renamed to \orb. 

\subsubsection{The charge unit types: list\_charges.xml}


{\color{red} Old text from Thorsten. Cleaning is needeed.}

\begin{verbatim}
<crgunit_type>
        <ChargeUnitType>
                <posname>QM_files/INPUT_COORDS</posname>
                <orbname>QM_files/fort.7</orbname>
                <basis>INDO</basis>
                <transorb>64</transorb>
                <reorg>0.21</reorg>
                <name>NMC</name>
                <energy>-0.21705</energy>
                <monomer_atom_map>
                 21 23 13 0 1 2 3 4 5 6 7 8 9 10 11 12 14
                 15 16 17 18 19 20 22  24 25 26 27 28 30
                 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45
                </monomer_atom_map>
                <monomer_atom_weights>
                  16 16 12 12 12 12 12 12 12 14 12 12 12 12 12 12 12 14
                  12 12 12 12 12 12 12 12 1 1 1 1 1
                  1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
                </monomer_atom_weights>

        </ChargeUnitType>
</crgunit_type>
\end{verbatim}

\begin{itemize}
 \item {\bf posname} \\
 Location of {\bf INPUT\_COORDS}.
 \item {\bf orbname} \\
 Location of {\bf fort.7}.
 \item{\bf basis} \\
 This should be set to INDO, unless the fort.7 has been created using another basis set. In that case it must be set to an xml file setting the characteristics of the basis set.
 \item {\bf transorb} \\
 Number of HOMO (LUMO) orbital. Corresponds to the number of $\alpha$ electrons in the \emph{Gaussian} log-file {\bf get\_orbitals.log} minus one (since counting in C++ starts at zero) for the HOMO and the number of $\alpha$ electrons for the LUMO.
 \item {\bf reorg} \\
 Reorganization energy of the cation or anion in eV calculated via \emph{Gaussian}. mp2 should be used at least for anions.
 \item {\bf name} \\
 Name of the mapping of the molecule. Must correspond to CG mapping.
 \item {\bf energy} \\
 Energy of the HOMO/LUMO level
 \item {\bf monomer\_atom\_map} \\
 List of atom indices as they were specified in the \emph{Gaussian} input used to create the {\bf fort.7} file. \\
 Note: The first three values are important, since they must correspond to the first three atoms defined in the coarse-grained mapping, which are used to calculate two vectors indicating the orientation of the molecule. The third required vector is the eigenvector of the smallest eigenvalue of the gyration tensor, i.e. perpendicular to the planar core. \\
 Note: The number of molecules here may differ from that in the coarse-grained mapping, since for example only the core is important for transport and not the side chains, but it has to be the same number of atoms as in the \emph{Gaussian} input file otherwise overlap integral values will be terribly wrong.
\end{itemize}
